# 男频网文 AI 作者工具（Web）PRD v1.0

## 1. 项目概述
- 项目名：男频网文 AI 作者工具（Web）
- 产品定位：面向男频网文作者的可控共创写作台，帮助作者稳定日更、减少设定冲突、提升成稿效率。
- 产品形态：Web SaaS（V1 仅作者工具，不做读者社区）。

## 2. 目标用户
1. 新人作者：缺乏长篇结构能力，容易卡文或断更。
2. 连载作者：日更压力大，中后期剧情易失控。
3. 工作室作者：多人协作下设定不统一。

## 3. 产品目标（V1）
1. 激活目标：新用户 24 小时内完成“设定库 + 首章草稿”。
2. 留存目标：7 天内至少完成 3 次章节创作。
3. 质量目标：设定冲突率相对用户初稿下降 50%。

## 4. 范围定义

### 4.1 V1 包含
1. 作品管理（创建/列表/归档）
2. 设定库（角色、境界、功法、势力、道具、地点）
3. 大纲生成（卷-章-场景）
4. 章节共写（续写/改写/扩写/压缩）
5. 一致性检查（人设、战力、时间线、术语）
6. 版本管理（快照、Diff、回滚）
7. 导出（TXT/Docx）

### 4.2 V1 不包含
1. 读者社区功能
2. 一键整本自动生成
3. 多题材深度模板（先聚焦男频主流题材）

## 5. 核心用户流程
1. 创建作品并选择题材模板（玄幻/都市异能/仙侠）。
2. 填写基础设定（主角、金手指、升级体系）。
3. AI 生成作品圣经（世界观、角色关系、境界表）。
4. AI 生成前 30 章大纲（每章包含目标、冲突、钩子）。
5. 用户进入章节编辑器，按“章节任务卡”写作。
6. 写作后触发一致性检查并给出修订建议。
7. 保存版本并导出投稿文件。

## 6. 功能需求（FR）

### FR-1 作品管理
- 创建作品字段：名称、题材、目标字数、更新频率
- 状态：连载中/完结/归档
- 权限：V1 单用户私有

### FR-2 设定库（Lorebook）
- 实体类型：角色、境界、功法、势力、道具、地点
- 字段：名称、描述、标签、首次登场章、约束规则
- 支持手动编辑与 AI 补全
- 所有设定变更保留历史版本

### FR-3 大纲引擎
- 输入：题材、主线目标、反派、升级路径
- 输出：卷列表、章列表、每章目标/冲突/反转/章尾钩子
- 支持锁定章节，避免被重写

### FR-4 章节共写
- 模式：续写、改写、扩写、压缩
- 参数：篇幅、节奏（慢/中/快）、爽感等级、文风约束
- 输出：分段草稿，可逐段采纳

### FR-5 一致性检查
- 检查项：
  1. 角色设定冲突
  2. 境界与战力冲突
  3. 时间线冲突
  4. 术语不一致
- 输出：问题位置、问题类型、修复建议、可一键应用修复

### FR-6 版本管理
- 自动快照：每次 AI 写入后存档
- 手动快照：用户可打里程碑版本
- Diff：段落级对比
- 回滚：恢复到指定版本

### FR-7 导出
- 格式：TXT、Docx
- 导出内容：正文 + 目录（可选）

## 7. 非功能需求（NFR）
1. 章节生成首包响应 < 6s，2000 字完整生成 < 30s。
2. 服务可用性 SLA 99.5%。
3. 用户文本默认不用于训练。
4. AI 生成与用户编辑具备审计日志。
5. 每千字生成成本可观测、可限流。

## 8. 验收标准（UAT）
1. 新用户 15 分钟内可完成首章草稿。
2. 设定库变更后，一致性检查可识别旧章节冲突。
3. 章节回滚后内容与历史版本一致。
4. 导出文档无乱码，章节顺序正确。

## 9. 里程碑（Sprint）
1. Sprint 1：作品管理 + 设定库 + 基础编辑器
2. Sprint 2：大纲引擎 + 章节共写
3. Sprint 3：一致性检查 + 版本管理 + 导出
4. Sprint 4：稳定性、埋点、灰度发布

## 10. Definition of Done
1. 每个核心接口有 OpenAPI 文档。
2. 每个核心流程有集成测试。
3. 创建作品 -> 生成大纲 -> 写章节 -> 检查 -> 导出链路可跑通。
4. 监控可看到延迟、错误率、成本。
5. 灰度环境连续 7 天稳定运行。
